#!/usr/bin/env bash
set -e

# Check if any source files are staged
if git diff --cached --name-only | grep -q "^src/"; then
    echo "Source files changed, rebuilding uberscript..."
    bb build

    # Stage the regenerated tmuxb if it changed
    if ! git diff --quiet tmuxb 2>/dev/null; then
        git add tmuxb
        echo "Staged updated tmuxb"
    fi
fi
